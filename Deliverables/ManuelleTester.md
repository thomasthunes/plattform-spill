# Tester
I denne filen følger det ulike tester som er ment til å teste sentrale funksjonaliteter ved spillet vårt. Dette gjelder blant annet tester for hvordan spilleren interagerer med objekter på spillebrettet, og hvordan attributter ved spilleren endres gjennom spillet. Vi har oppsummert testene i to tabeller, den første tabellen skiller mellom Single Player og Multiplayer, mens den andre tabellen er universal og gjelder for både Single Player og Multiplayer.  

I samråd med studentassitent har vi valgt å kun lage manuelle tester, da formatet på koden vår gjør det vanskelig å lage JUNIT tester. Dette er fordi klassen som styrer spilleren (*player*) inneholder sprite flere steder. Dermed blir det vanskelig å teste funksjonene uten å kjøre grafikken samtidig. Vi mener likevel at de manuelle testene som vi har laget i denne filen er godt dekkene for funksjonaliteten i koden vår. Testene dekker alle mulige interaksjoner mellom spiller og de ulike objektene som finnes i spillet.  

**MERK:** Alle testene under forutsetter at du har startet spillet. Se [Dokumentasjon om teknisk produktoppsett](https://git.app.uib.no/scrumbois/plattform-spill/-/blob/master/README.md#teknisk-produktoppsett) for hvordan du skal starte spillet.  

## 1. Tester for Single Player og Multiplayer   
| Test | Beskrivelse Player 1 (også Single Player) | Beskrivelse Player 2 (ved multiplayer) | Funksjonalitet i koden |
|---|---|---|---|
| Hoppe | <ul><li>**Hvordan starte testen:** For å starte testen må spilleren trykke på *space*. </li><li>**Kriterie for at testen passerer:** For at denne testen skal passere må spilleren bevege seg oppover før den så beveger seg nedover igjen til den treffer bakken/et flatt underlag. </li></ul> | <ul><li>**Hvordan starte testen:** For å starte testen må spilleren trykke på *piltast oppover* </li><li>**Kriterie for at testen passerer:** Se samme beskrivelse som Single Player. </li></ul> | Denne funksjonaliteten dekkes av funksjonen *keyDown()* i klassen *controller*, i tillegg til hjelpefunksjonene *getVelocity()*, *getSpeed()* og *GetCanJump()* fra klassen *Item*. |
| Bevegelse høyre | <ul><li>**Hvordan starte testen:** For å starte testen må spilleren trykke på tasten *D*. </li><li>**Kriterie for at testen passerer:** For at denne testen skal passere må spilleren bevege seg bortover mot høyre. Merk at dette kun vil fungere så lenge det ikke står plassert en blokk til høyre for spilleren som hindrer passasje mot høyre. Se egen test om blokk for dette. </li></ul> | <ul><li>**Hvordan starte testen:** For å starte testen må spilleren trykke på *piltast høyre*. </li><li>**Kriterie for at testen passerer:** Se samme beskrivelse som Single Player. </li></ul> | Denne funksjonaliteten dekkes av funksjonen *keyDown()* i klassen *controller*, i tillegg til hjelpefunksjonene *getVelocity()* og *getSpeed()* fra klassen *Item*. |
| Bevegelse venstre | <ul><li>**Hvordan starte testen:** For å starte testen må spilleren trykke på tasten *A*. </li><li>**Kriterie for at testen passerer:** For at denne testen skal passere må spilleren bevege seg bortover mot venstre. Merk at dette kun vil fungere så lenge det ikke står plassert en blokk til venstre for spilleren som hindrer passasje mot venstre. Se egen test om blokk for dette. </li></ul> | <ul><li>**Hvordan starte testen:** For å starte testen må spilleren trykke på *piltast venstre*. </li><li>**Kriterie for at testen passerer:** Se samme beskrivelse som Single Player. </li></ul> | Denne funksjonaliteten dekkes av funksjonen *keyDown()* i klassen *controller*, i tillegg til hjelpefunksjonene *getVelocity()* og *getSpeed()* fra klassen *Item*. |
| Plukke opp objekt (liv/nøkkel) | <ul><li>**Hvordan starte testen:** For å starte testen må spilleren bevege seg fram til enten et liv-objekt eller en nøkkel slik at posisjonen til spilleren er like i nærheten av objektet som skal plukkes opp. Dette gjelder både i høyderetning (y-retning) og sideretning (x-retning). Vi har lagt inn et intervall på spilleren sin bredde +/- 40 x-enheter i x-retning, og et intervall på spilleren sin høyde + 20-50 y-enheter i y-retning. I praksis vil dette bety at spilleren må være i nesten kontakt med objektet som skal plukkes opp. Deretter må spilleren trykke på tasten *F* for å plukke opp objektet. </li><li>**Kriterie for at testen passerer:** For at denne testen skal passere må objektet som blir plukket opp forsvinne fra spillebrettet slik at det ikke lenger er synlig. </li></ul> | <ul><li>**Hvordan starte testen:** For å starte testen må spilleren være i nærheten av objektet som skal plukkes opp (se beskrivelse på Single Player) og deretter trykke på tasten *P*. </li><li>**Kriterie for at testen passerer:** For at denne testen skal passere må objektet som blir plukket opp forsvinne fra spillebrettet slik at det ikke lenger er synlig. </li></ul> | Denne funksjonaliteten dekkes av funksjonen *pickUpItem()* i klassen *mainPlayer* og funksjonen *collidesWithActorFromSide()* i klassen *Item*. |


## 2. Universale tester for både Single Player og Multiplayer  
| Test | Beskrivelse | Funksjonalitet i koden |
|---|---|---|
| Blokk | <ul><li>**Hvordan starte testen:** For å starte testen må spilleren bevege seg inn i et objekt som står vertikalt plassert på spillebrettet. Med dette menes det en vegg i en hvilken som helst høyde, som treffer spilleren på spillerens høyre, venstre, øvre eller nedre side. Merk at fiender og objekter som liv/nøkkel fungerer ikke som blokker på spilleren. </li><li>**Kriterie for at testen passerer:** For at denne testen skal passere må spilleren stoppe opp når den treffer en blokk. At den stopper opp vil si at farten settes til 0. </li></ul> | Denne funksjonaliteten dekkes av funksjonen *isCellBlocked()* i klassen *Item*, som også bruker funksjonene *collidesRight()*, *collidesLeft()*, *collidesTop()* og *collidesBottom()* fra samme klasse. |
| Drepe fiende | <ul><li>**Hvordan starte testen:** For å starte testen må spilleren hoppe på en fiende, det vil si at spilleren kolliderer med fienden ovenfra og ned. </li><li>**Kriterie for at testen passerer:** For at denne testen skal passere må fienden som spilleren har hoppet på forsvinne fra spillebrettet. Videre må også poengsummen til spilleren for antall fiender drept økes med 1. </li></ul> | Denne funksjonaliteten dekkes av funksjonen *loseHealth()* i klassen *monster*. |
| Poengsum/antall fiender drept | <ul><li>**Hvordan starte testen:** For å starte testen må spilleren drepe en fiende. </li><li>**Kriterie for at testen passerer:** For at denne testen skal passere må poengsummen til spilleren økes når den har drept en fiende. Dette betyr at antall drepte fiender som står beskrevet i teksten som følger spilleren må økes med 1. </li></ul> | Denne funksjonaliteten dekkes av funksjonen *attack()* i klassen *mainPlayer*. |
| Vinne spillet | <ul><li>**Hvordan starte testen:** For å starte testen må spilleren bevege seg inn i målområdet i spillet. Målområdet er plattformen som står plassert i slutten av spillebrettet. </li><li>**Kriterie for at testen passerer:** For at denne testen skal passere må spilleren ha drept den største fienden (vampyren) og ha plukket opp nøkkelen. Når spilleren så beveger seg inn i målområdet har spilleren vunnet det første spillebrettet. Deretter blir spilleren sendt til et nytt spillebrett. Spilleren må da komme seg gjennom det nye spillebrettet og bevege seg inn i målområdet. Spilleren har vunnet når spilleren går inn i målområdet og en ny skjerm med teksten "Player has won" og poengsummen vises. </li></ul> | Denne funksjonaliteten dekkes av funksjonene *playerWon()* og *hasKey()* i klassen *mainPlayer*. |
| Spawning av objekter på spillebrettet | <ul><li>**Hvordan starte testen:** For å starte testen må spillet startes. Nye objekter spawnes kun når nytt spillebrett startes. </li><li>**Kriterie for at testen passerer:** For at denne testen skal passere må det komme opp ulike objekter slik som fiender, bomber og liv på ulike posisjoner på spillebrettet når spillet startes. </li></ul> | Denne funksjonaliteten dekkes av funksjonene som er gitt i klassen *ItemFactory*. |
| Falle utenfor spillebrettet | <ul><li>**Hvordan starte testen:** For å starte testen må spilleren bevege seg utenfor området der det er bakke/underlag, slik at spilleren faller ned til bunnen av skjermen. </li><li>**Kriterie for at testen passerer:** For at denne testen skal passere må antall liv for spilleren bli redusert til 0. Videre må det komme opp en ny skjerm der det står "Game Over" sammen med et scoreboard som viser de beste poengsummene. </li></ul> | Denne funksjonaliteten dekkes av funksjonen *update()* i klassen *mainPlayer*. |
| Miste liv | <ul><li>**Hvordan starte testen:** For å starte testen må spilleren kollidere med et fiende-objekt. </li><li>**Kriterie for at testen passerer:** For at denne testen skal passere må antall liv som spilleren har bli redusert. Antall liv vises i teksten som følger spilleren på spillebrettet. </li></ul> | Denne funksjonaliteten dekkes av funksjonen *loseHealth()* i klassen *mainPlayer*. |
| Død av fiende | <ul><li>**Hvordan starte testen:** For å starte testen må spilleren kollidere med en fiende helt til spilleren har mistet alt liv. </li><li>**Kriterie for at testen passerer:** For at denne testen skal passere må antall liv for spilleren bli redusert til 0. Videre må det komme opp en ny skjerm der det står "Game Over" sammen med et scoreboard som viser de beste poengsummene. </li></ul> | Denne funksjonaliteten dekkes av funksjonen *update()* i klassen *mainPlayer*. |
| Øke liv | <ul><li>**Hvordan starte testen:** For å starte testen må spilleren plukke opp et liv-objekt. </li><li>**Kriterie for at testen passerer:** For at denne testen skal passere må antall liv som spilleren har økes med 20 etter at liv-objektet er plukket opp. </li></ul> | Denne funksjonaliteten dekkes av funksjonene *pickUpItem()* og *checkInventory()* i klassen *mainPlayer*. |
| Maks liv | <ul><li>**Hvordan starte testen:** For å starte testen må spilleren plukke opp flere liv-objekt helt fram til antall liv spilleren har er 120. </li><li>**Kriterie for at testen passerer:** For at denne testen skal passere må antall liv som spilleren har ikke overgå 120. Når antall liv har nådd 120 har altså spilleren maks liv. </li></ul> | Denne funksjonaliteten dekkes av funksjonene *pickUpItem()*, *checkInventory()* og *setHealth()* i klassen *mainPlayer*. |
| Kamera | <ul><li>**Hvordan starte testen:** For å starte testen må spilleren bevege seg bortover spillebrettet. </li><li>**Kriterie for at testen passerer:** For at denne testen skal passere må kameraet følge spilleren når den beveger seg bortover, slik at spilleren forblir i sentrum på skjermen. </li></ul> | Denne funksjonaliteten dekkes av funksjonen *create()* i klassen *application* og funksjonen *render()* i klassen *Play*. |
| Kollisjon med bombe-objekt | <ul><li>**Hvordan starte testen:** For å starte testen må spilleren kollidere med et bombe-objekt. </li><li>**Kriterie for at testen passerer:** For at denne testen skal passere må spilleren forflyttes vekk fra bombe-objektet ved kollisjon. </li></ul> | Denne funksjonaliteten dekkes av funksjonen *getAttack()* i klassen *bombs*. |
| Kollisjon med Trollmann (Wizard) | <ul><li>**Hvordan starte testen:** For å starte testen må spilleren kollidere med en trollmann. </li><li>**Kriterie for at testen passerer:** For at denne testen skal passere må spilleren bli teleportert nesten helt tilbake til start, ved toppen helt til venstre på banen. </li></ul> | Denne funksjonaliteten dekkes av funksjonen *getAttack()* i klassen *Wizard*. |
| Kollisjon med Vampire | <ul><li>**Hvordan starte testen:** For å starte testen må spilleren kollidere med en Vampire. </li><li>**Kriterie for at testen passerer:** Dersom spilleren kolliderer med Vampire mens Vampire skyter ut flaggermuser (bats) så vil spilleren miste alt liv ved kollisjon og dø umiddelbart. Dersom spilleren kolliderer med Vampire etter at Vampire har skutt ut alle sine flaggermuser (bats) så vil spilleren miste 2 liv for hver kollisjon. Merk her at kollisjon må skje fra siden. En kollisjon ovenfra og ned (altså at spilleren hopper på Vampire) vil føre til at Vampire dør (se også egen test *Drepe fiende*). </li></ul> | Denne funksjonaliteten dekkes av funksjonen *getAttack()* i klassen *Vampire*. |
| Kollisjon med Bat | <ul><li>**Hvordan starte testen:** For å starte testen må spilleren kollidere med en Bat, alstå flaggermus-objektet som skytes ut fra Vampire-objektet. </li><li>**Kriterie for at testen passerer:** For at denne testen skal passere må spilleren miste 10 liv for hvert Bat-objekt som spilleren blir truffet av/kolliderer med. Merk her at kollisjon må skje fra siden. En kollisjon ovenfra og ned (altså at spilleren hopper på en Bat) vil føre til at Bat-objektet dør. </li></ul> | Denne funksjonaliteten dekkes av funksjonen *attack()* og *getAttack()* i klassen *Bat*. |
| Bat beveger seg mot spiller | <ul><li>**Hvordan starte testen:** For å starte testen må spilleren være i nærheten av en Bat, alstå flaggermus-objektet som skytes ut fra Vampire-objektet. Her har vi definert en rekkevidde på spilleren sitt x-koordinat +/- 500 x-enheter til venstre/høyre. </li><li>**Kriterie for at testen passerer:** For at denne testen skal passere må Vampire skyte ut Bat-objekter i retning spilleren, gitt at spilleren befinner seg innenfor den definerte rekkevidden. Merk at Bat-objektene skal skytes ut i retning av spilleren. </li></ul> | Denne funksjonaliteten dekkes av funksjonen *playerInRange()* i klassen *Vampire* og funksjonen *moveToPlayer()* i klassen *Bat*. |
| Kollisjon med monster | <ul><li>**Hvordan starte testen:** For å starte testen må spilleren kollidere med en et monster-objekt (altså de grønne fiende-objektene på spillebrettet). </li><li>**Kriterie for at testen passerer:** For at denne testen skal passere må spilleren miste 1 liv for hver kollisjon </li></ul> | Denne funksjonaliteten dekkes av funksjonen *getAttack()* og *loseHealth()* i klassen *monster*. |
| Spille med en Spiller 2 | <ul><li>**Hvordan starte testen:** For å starte testen må man starte spillet ved å trykke på "+2" ikonet på mainscreen (meny-skjermen). </li><li>**Kriterie for at testen passerer:** For at testen skal passere må spiller 1 og spiller 2 være hvert sitt respektive spiller-objekter. Det betyr at de to spiller-objektene skal kunne bevege seg uavhengig av hverandre, med hver sine egne kontrollere. </li></ul> | Denne funksjonaliteten dekkes av funksjonen *show()* i klassen *Play*. |
| Uavhengig liv mellom spiller 1 og 2 | <ul><li>**Hvordan starte testen:** For å starte testen må en av spillerene kollidere med et fiende-objekt eller plukke opp et medkit. </li><li>**Kriterie for at testen passerer:** For at denne testen skal passere må både spiller 1 og spiller 2 kunne miste liv uavhengig av hverandre. Det vil si at den spilleren som tar skade mister eget liv. Det samme gjelder dersome en av spillerne plukker opp en medkit. Spilleren som plukker opp medkit skal kun øke sitt eget liv. </li></ul> | Denne funksjonaliteten dekkes av funksjonen *show()* i klassen *Play*, *loseHealth()*, *pickUpItem()* og *checkInventory()* i klassen *mainPlayer*. |
| En av spillerene dør | <ul><li>**Hvordan starte testen:** For å starte testen må en av spillerne dø av en fiende eller ved at den faller utenfor spillebrettet. </li><li>**Kriterie for at testen passerer:** For at denne testen skal passere må den overlevende spilleren fortsatt kunne spille alene når den andre dør. Spillkameraet vil da følge spilleren som er i live. Hvis begge spillerene dør avsluttes spillet og en "Game Over" skjerm vil vises. </li></ul> | Denne funksjonaliteten dekkes av funksjonen *update()* i klassen *mainPlayer*, *render()* og *gameOver()* i klassen *Play*. |
| Pause | <ul><li>**Hvordan starte testen:** For å starte testen må spilleren først starte spillet enten som Single Player eller Multiplayer, og deretter trykke på *enter*. </li><li>**Kriterie for at testen passerer:** For at denne testen skal passere må spillet stoppe helt opp, det vil si at skjermbildet fryser slik at ingen objekter beveger på seg. Når spillet er i pause-modus vil ikke noen av spillerene kunne bevege på spilleren ved hjelp av kontrollerene. Videre må en trykke *enter* på nytt for å fortsette spillet. Da vil objektene starte å bevege på seg igjen, og spillerene kan fortsette å bevege spilleren sin ved hjelp av kontrollerene. Det er også et viktig kriterie at spillerene fortsetter akkurat der de var da spillet ble satt på pause. </li></ul> | Denne funksjonaliteten dekkes av funksjonen *pause()* i klassen *Play*. |



